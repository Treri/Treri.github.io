<!DOCTYPE html>
<html id="J-html" class="">
<head>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PhilNa2主题页面模板修改 | 自说Me话</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="PhilNa2主题页面模板修改" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="对于这个主题的页面模板,我只能说对我的挑战很大啊.当初刚使用这个主题时候就遇到了多多的问题, 首先是新建contact页面的时候,再编辑器里面输入的内容经过发布,看不到任何内容,只有空空的一个标题.然后是links页面,输入内容后也是如此,发布后有链接,但是连点说明都没法加." />
<meta property="og:description" content="对于这个主题的页面模板,我只能说对我的挑战很大啊.当初刚使用这个主题时候就遇到了多多的问题, 首先是新建contact页面的时候,再编辑器里面输入的内容经过发布,看不到任何内容,只有空空的一个标题.然后是links页面,输入内容后也是如此,发布后有链接,但是连点说明都没法加." />
<link rel="canonical" href="http://isay.me/2011/04/43-modify-philna2-page-templates.html" />
<meta property="og:url" content="http://isay.me/2011/04/43-modify-philna2-page-templates.html" />
<meta property="og:site_name" content="自说Me话" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-04-09T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PhilNa2主题页面模板修改" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2011-04-09T00:00:00+08:00","datePublished":"2011-04-09T00:00:00+08:00","description":"对于这个主题的页面模板,我只能说对我的挑战很大啊.当初刚使用这个主题时候就遇到了多多的问题, 首先是新建contact页面的时候,再编辑器里面输入的内容经过发布,看不到任何内容,只有空空的一个标题.然后是links页面,输入内容后也是如此,发布后有链接,但是连点说明都没法加.","headline":"PhilNa2主题页面模板修改","mainEntityOfPage":{"@type":"WebPage","@id":"http://isay.me/2011/04/43-modify-philna2-page-templates.html"},"url":"http://isay.me/2011/04/43-modify-philna2-page-templates.html"}</script>
<!-- End Jekyll SEO tag -->

  <link type="application/atom+xml" rel="alternate" href="http://isay.me/feed.xml" title="自说Me话" />
  <link rel="stylesheet" type="text/css" media="all" href="/assets/css/style.css" />
  
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
  
  <nav class="lotus-nav">
  <ul>
    
    
    
    
    
    <li class="home ">
      
      <a href="/" rel="bookmark" title="首页">
        <i class="fa fa-home"></i>
      </a>
      
    </li>
    
    
    
    
    
    <li class=" ">
      
      <a href="/archives.html" rel="bookmark" title="文章归档">
        <i class="fa fa-reorder"></i>
      </a>
      
    </li>
    
    
    
    
    
    <li class=" ">
      
      <a href="/tags.html" rel="bookmark" title="文章标签">
        <i class="fa fa-tags"></i>
      </a>
      
    </li>
    

    
    
    
    
    
    <li class=" ">
      
      <a href="/contact.html" rel="bookmark" title="关于我">
        <i class="fa fa-user"></i>
      </a>
      
    </li>
    
  </ul>
</nav>

  <p class="lotus-breadcrub">
  <a href="/" rel="nofollow" rel="nofollow" title="首页">首页</a>
  <span> &gt; </span>
  <a href="/archives.html" rel="nofollow" >文章归档</a>
  <span> &gt; </span>
  PhilNa2主题页面模板修改
</p>
<h1 class="lotus-pagetit">PhilNa2主题页面模板修改</h1>
<p class="lotus-meta">Publish: <time class="date" pubdate="April  9, 2011">April  9, 2011</time></p>
<article  itemscope itemtype="http://schema.org/Article" class="lotus-post lotus-post-columns-1">
<p>对于这个主题的页面模板,我只能说对我的挑战很大啊.当初刚使用这个主题时候就遇到了多多的问题,
首先是新建contact页面的时候,再编辑器里面输入的内容经过发布,看不到任何内容,只有空空的一个标题.然后是links页面,输入内容后也是如此,发布后有链接,但是连点说明都没法加.</p>

<p>我也向主题作者反馈了一下.主题一共自带了两个页面模板(加上默认的是3个,有特色的就两个嘛.哈哈)但是作者好像很忙,也没有解决,最后也就那样了.因此我一直都是使用的默认模板.链接页面我都是手动添加的链接啊.劳累程度可想而知了.</p>

<p>曾经想过在网上搜索答案来着,但是网上的新建页面的方法我好像都不适用(我知道本文的方法后才知道不是不适用,是我不会用.嘻嘻).别的主题有的像<strong>page.php single.php</strong>这样的文件,这个主题都有,但是文件里面只有寥寥几句话.”include xxx”就完了.这对于刚上来使用wordpress就遇到这样的主题的我来说,难度很大啊.当时根本不敢胡乱改主题.要不然把网站搞的都进不去了.我就更不会弄啦.</p>

<p>随着使用这个主题的时间越来越长.对于这个主题的修改也越来越多,因此对主题的文件结构也慢慢熟悉了,同时对于主题作者的创作风格也慢慢熟悉了.</p>

<p>唉,闲话不说了.还是说说正事,修改这个主题的页面模板.也可以说是创建一个模板.
用到的文件也就两三个吧. template.php 还有loop.php
至于为什么使用loop.php,是因为只有使用这个文件时,在编辑器里面的输入内容才可以显示,而其他的都不显示,所以要拿来借用一下.
主题中的其他的文件只起参考作用了.</p>

<p>献丑一下,把我在写这篇文章的时候修改的文件共享一下.如果你怕自己搞坏(或者是你很懒)的话,可以直接下载我修改好的文件,文章中讲到的可以留可以删的地方我貌似都留着了.你不想要的话,可以再自己删除.也可以看完本文后自己看着删除不想要的.</p>

<p><strong>点击下载<a href="http://u.115.com/file/f081e36b55">page.php</a></strong></p>

<p>在修改的过程中,我都在本地的服务器上测试,每删除一条语句,我都会测试一下是否成功,</p>

<p>下面就说说具体的修改过程.</p>

<p>首先打开template.php文件,可以看到下面的一句话</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php include_once TEMPLATEPATH . '/loop.php';?&gt;
</code></pre></div></div>

<p>这是将loop.php文件包含进来.因此我直接将loop.php里面的内容替换这句话,注意不要将下面的那个 &lt; /div&gt;去掉了.</p>

<p>原则上一个模板就这样创建完毕啦.你把page.php里面的内容全部删除,再把这个文件里面的内容全部粘贴到page.php里面,完全就替代了默认的页面模板.但是我们还要加工一下.
首先是下面这句话</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php include_once TEMPLATEPATH . '/templates/notice.php';?&gt;
</code></pre></div></div>

<p>这一句,你可以去掉或者留着.去掉了对页面也没有影响(目前我测试的情况来看是这样的,但是最还还是留着吧)
然后是下面的</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if(is_archive() || is_search()){
	include_once TEMPLATEPATH . '/templates/loophead.php';
}
</code></pre></div></div>

<p>这句话,一看就知道是对页面没用的东西啦.直接去掉.
然后往下走,又有一句</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if( is_single() ): ?&gt;
        &lt;div id="position" class="box message"&gt;&lt;a class="right_arrow icon" title="&lt;?php _e('Back to homepage', YHL); ?&gt;" href="&lt;?php echo get_settings('home'); ?&gt;/"&gt;&lt;?php _e('Home', YHL); ?&gt;&lt;/a&gt; &amp;gt; &lt;?php the_category(', '); ?&gt; &amp;gt; &lt;?php the_title();?&gt;&lt;/div&gt;
&lt;?php echo "n"; endif; ?&gt;
</code></pre></div></div>

<p>判断single,和页面模板也没有关系,直接去掉.
然后就是显示文章标题,还有作者信息发布时间之类的控制语句了.
下面还有一句话,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if(is_singular()): ?&gt;
&lt;span id="skiptocomment" class="comments_link"&gt;&lt;a href="#comments"&gt;&lt;?php _e('Skip to Comments', YHL)?&gt;&lt;/a&gt;&lt;/span&gt;&lt;?php else: ?&gt;&lt;span class="comments_link"&gt;&lt;sup&gt;{ &lt;/sup&gt;&lt;?php comments_popup_link(__('No Comments',YHL), __('1 Comment', YHL), __('% Comments', YHL));?&gt;&lt;sub&gt; }&lt;/sub&gt;&lt;/span&gt;
&lt;?php endif; ?&gt;
</code></pre></div></div>

<p>这句话是右上角的那个跳到评论的控制语句,如果你不打算让页面有评论功能的话,可以去掉.但是最好留着吧.我的留着了.
然后就到了<strong>class=”post_content content”</strong>的部分了.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if((is_home() || is_archive()) &amp;&amp; has_post_thumbnail()) {
			the_post_thumbnail(); // you may change the size of the thumbnail by use param array(width, height);
		}
</code></pre></div></div>

<p>这句话,你可以去掉或者留着.这个是显示缩略图的,我感觉对于页面模板来说没有用处,所以去掉了.注意不要把前面的那个&lt;  ?php去掉了.要不然你就悲剧了.</p>

<p>下面还有一句要处理的</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if(!is_page()): ?&gt;
	&lt;div class="meta"&gt;
		&lt;span class="cat icon"&gt;&lt;?php the_category(', ');?&gt;&lt;/span&gt;
		&lt;?php the_tags('&lt;span class="tag icon"&gt;', ', ', '&lt;/span&gt;');?&gt;
	&lt;/div&gt;
	&lt;?php endif; // meta ?&gt;
</code></pre></div></div>

<p>这是显示文章下面的分类的那个控制语句.判断条件是 “如果是非页面”.我们本来搞的就是页面模板,这里还判断非页面,直接去掉.</p>

<p>接下来就是 显示相关文章还有随机文章的控制语句了.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>do_action('philnaEndloop');
</code></pre></div></div>

<p>这句话是japhia童鞋告诉我用处的.页面应该用不着显示相关文章还有随机文章,去掉吧
接下来还有一句话</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>include_once TEMPLATEPATH . '/templates/navigation.php';
</code></pre></div></div>

<p>这个的作用我还没弄明白,我去掉后 对页面好像没有什么影响,暂且先加个// 注释掉吧.
最后的一个就是下面这句话了</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>comments_template();
</code></pre></div></div>

<p>这个就是评论功能了.要不要随你了.
如果你留着评论的话.我觉得对于这个评论还是要再修改一下.</p>

<p>就是文章下方的那个Trackback 还有评论框下方的那个Trackbacks &amp; Pingbacks ( 0 )
页面应该用不到trackback,所以这些也去掉.修改这个的话,就不是在这个文件里面了.
转移到comments.php文件.找到</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if(pings_open()):?&gt;
&lt;a id="addtrackback" class="addtrackback" rel="nofollow" href="&lt;?php trackback_url(); ?&gt;" title="&lt;?php _e('Use this link to send a trackback to this post.', YHL);?&gt;"&gt;&lt;?php _e('Trackback', YHL);?&gt;&lt;/a&gt;
&lt;?php endif; ?&gt;
</code></pre></div></div>

<p>这是显示 订阅到这里的评论右边的那个Trackback的,在前面加个判断变为</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if(!is_page()):?&gt;
           &lt;?php if(pings_open()):?&gt;
                      &lt;a id="addtrackback" class="addtrackback" rel="nofollow" href="&lt;?php trackback_url(); ?&gt;" title="&lt;?php _e('Use this link to send a trackback to this post.', YHL);?&gt;"&gt;&lt;?php _e('Trackback', YHL);?&gt;&lt;/a&gt;
           &lt;?php endif; ?&gt;
&lt;?php endif; ?&gt;
</code></pre></div></div>

<p>这样 页面就不显示了,文章页正常显示.
还有最下面的那个显示trackback状态的控制语句了.找到<code class="language-plaintext highlighter-rouge">&lt;!--trackpbacks state--&gt;</code>,在前面添加</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if(!is_page()):?&gt;
</code></pre></div></div>

<p>然后再在最后添加</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php endif; ?&gt;
</code></pre></div></div>

<p>这样页面就不会显示trackback状态了.
如果你还想把”<strong>可以使用的标签:</strong>” 那个框去掉的话,可以修改<strong>commentform.php</strong>文件,将位于最后的下面的语句删除</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div id="allowed_tags" class="box message icon"&gt;
	&lt;?php _e('**Allowed tags:** ',YHL);echo allowed_tags(); ?&gt;
&lt;/div&gt;
</code></pre></div></div>

<p>好了,整个模板已经修改完毕了.接下来新建页面的时候,就可以任你发挥啦.
网上的那些复制page.php文件然后修改content部分也界可以使用啦.
比如新建一个link页面,就在</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
		the_content(__('Read more...', YHL));
		?&gt;
</code></pre></div></div>

<p>前面或者后面添加原本link页面的那个函数就好了.
如果还想要 主题作者yinheli写的那个contace页面的邮件表单,就把相关的语句复制过来放到相应的地方就好啦</p>

<p>模板是修改完毕了.但是我在想,原本的contact模板还有link模板好像里面并没有什么地方导致 输入的内容无法显示啊.无解.
不管啦.反正模板出来了,以后再添加什么模板的话,直接在这个基础上 修改就好啦.</p>

</article>
<p class="lotus-anno">声明: 本文采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="自由转载-非商用-非衍生-保持署名">BY-NC-SA</a> 授权。转载请注明转自: <a href="http://isay.me/2011/04/43-modify-philna2-page-templates.html" title="" rel="nofollow">PhilNa2主题页面模板修改 - 自说Me话</a></p>
<section class="lotus-nextpage fn-clear">
  
  <div class="lotus-nextpage-left"><a class="prev" href="/2011/04/42-final-version-feed-output-copyright-information.html" rel="prev">&laquo;&nbsp;PhilNa2主题feed输出版权最终版</a></div>
  
  
  <div class="lotus-nextpage-right"><a class="next" href="/2011/04/44-girl-should-have-boyfriend-with-i-blog.html" rel="next">转-女生应该找个有独立博客的男朋友&nbsp;&raquo;</a></div>
  
</section>


  <div id="comments">
  
      
        <div id="disqus_thread"></div>
<script>
  function disqus_config() {
      this.page.url = "http://isay.me/2011/04/43-modify-philna2-page-templates.html";
      this.page.identifier = "43";
      this.page.title = "PhilNa2主题页面模板修改";
  };

  (function() {
      var d = document, s = d.createElement('script');
      s.src = '//isaymesite.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      
  
  </div>




  <footer class="lotus-footer">
  <p>Copyright © 2011–2023 自说Me话 All rights reserved. Design by <a href="http://www.zhanxin.info" target="_blank">zhanxin</a>.</p>
</footer>
  
</body>
</html>
