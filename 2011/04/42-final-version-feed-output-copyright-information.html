<!DOCTYPE html>
<html id="J-html" class="">
<head>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PhilNa2主题feed输出版权最终版 | 自说Me话</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="PhilNa2主题feed输出版权最终版" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="昨天晚上Japhia童鞋问我关于PhilNa2主题 在feed中输出版权信息的问题.主要需求就是将版权信息放在主题自带的相关文章之前.以前在feed中输出版权信息,用的是wordpress的feed输出版权信息中讲到的方法,在functions.php中增加函数. 但是此方法无法控制版权信息在feed中的位置.效果出来后排在了相关文章.无觅推荐还有无觅网络的后面,位置很不明显." />
<meta property="og:description" content="昨天晚上Japhia童鞋问我关于PhilNa2主题 在feed中输出版权信息的问题.主要需求就是将版权信息放在主题自带的相关文章之前.以前在feed中输出版权信息,用的是wordpress的feed输出版权信息中讲到的方法,在functions.php中增加函数. 但是此方法无法控制版权信息在feed中的位置.效果出来后排在了相关文章.无觅推荐还有无觅网络的后面,位置很不明显." />
<link rel="canonical" href="http://isay.me/2011/04/42-final-version-feed-output-copyright-information.html" />
<meta property="og:url" content="http://isay.me/2011/04/42-final-version-feed-output-copyright-information.html" />
<meta property="og:site_name" content="自说Me话" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-04-09T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PhilNa2主题feed输出版权最终版" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2011-04-09T00:00:00+08:00","datePublished":"2011-04-09T00:00:00+08:00","description":"昨天晚上Japhia童鞋问我关于PhilNa2主题 在feed中输出版权信息的问题.主要需求就是将版权信息放在主题自带的相关文章之前.以前在feed中输出版权信息,用的是wordpress的feed输出版权信息中讲到的方法,在functions.php中增加函数. 但是此方法无法控制版权信息在feed中的位置.效果出来后排在了相关文章.无觅推荐还有无觅网络的后面,位置很不明显.","headline":"PhilNa2主题feed输出版权最终版","mainEntityOfPage":{"@type":"WebPage","@id":"http://isay.me/2011/04/42-final-version-feed-output-copyright-information.html"},"url":"http://isay.me/2011/04/42-final-version-feed-output-copyright-information.html"}</script>
<!-- End Jekyll SEO tag -->

  <link type="application/atom+xml" rel="alternate" href="http://isay.me/feed.xml" title="自说Me话" />
  <link rel="stylesheet" type="text/css" media="all" href="/assets/css/style.css" />
  
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
  
  <nav class="lotus-nav">
  <ul>
    
    
    
    
    
    <li class="home ">
      
      <a href="/" rel="bookmark" title="首页">
        <i class="fa fa-home"></i>
      </a>
      
    </li>
    
    
    
    
    
    <li class=" ">
      
      <a href="/archives.html" rel="bookmark" title="文章归档">
        <i class="fa fa-reorder"></i>
      </a>
      
    </li>
    
    
    
    
    
    <li class=" ">
      
      <a href="/tags.html" rel="bookmark" title="文章标签">
        <i class="fa fa-tags"></i>
      </a>
      
    </li>
    

    
    
    
    
    
    <li class=" ">
      
      <a href="/contact.html" rel="bookmark" title="关于我">
        <i class="fa fa-user"></i>
      </a>
      
    </li>
    
  </ul>
</nav>

  <p class="lotus-breadcrub">
  <a href="/" rel="nofollow" rel="nofollow" title="首页">首页</a>
  <span> &gt; </span>
  <a href="/archives.html" rel="nofollow" >文章归档</a>
  <span> &gt; </span>
  PhilNa2主题feed输出版权最终版
</p>
<h1 class="lotus-pagetit">PhilNa2主题feed输出版权最终版</h1>
<p class="lotus-meta">Publish: <time class="date" pubdate="April  9, 2011">April  9, 2011</time></p>
<article  itemscope itemtype="http://schema.org/Article" class="lotus-post lotus-post-columns-1">
<p>昨天晚上<a href="http://japhia.info/">Japhia童鞋</a>问我关于PhilNa2主题 在feed中输出版权信息的问题.主要需求就是将版权信息放在主题自带的相关文章之前.以前在feed中输出版权信息,用的是<a href="/2011/03/9-wordpresss-feed-output-copyright-information.html">wordpress的feed输出版权信息</a>中讲到的方法,在functions.php中增加函数. 但是此方法无法控制版权信息在feed中的位置.效果出来后排在了相关文章.无觅推荐还有无觅网络的后面,位置很不明显.</p>

<p>于是我就 开始了鼓捣了.我记得在feed中是有相关文章的,肯定是有关函数控制的.于是找到了 主题文件夹中的 <em>relatedposts.php</em>文件,在这里面找到了答案.</p>

<p>这里面有一个函数的名字叫作<em>philnaFeedRelatedPosts</em>,看名字就知道是在 feed中插入相关文章的了.因此就对它动刀啦.
这个函数的函数主体是</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function philnaFeedRelatedPosts($content){
if(is_feed())
			{$content .= philnaRelatedPosts('limit=8&amp;excerpt_length=0');}
	return $content;
}
add_filter('the_content', 'philnaFeedRelatedPosts', 0);
</code></pre></div></div>

<p>我们在这里将 判断条件变换一下.改成<code class="language-plaintext highlighter-rouge">if(is_feed()||is_single())</code>,这样就可以在文章页还有feed中同时输出东西了.然后将<a href="/2011/03/9-wordpresss-feed-output-copyright-information.html">wordpress的feed输出版权信息</a>中讲到的以<code class="language-plaintext highlighter-rouge">$content.=</code> 开头的内容 都放在<code class="language-plaintext highlighter-rouge">$content .= philnaRelatedPosts('limit=8&amp;excerpt_length=0');</code>前面,这样保存后,新建一篇文章测试一下.再看feed输出 应该就有效果了.版权信息处在相关文章的前面.</p>

<p>最后作一下修缮工作. 首先,functions.php里面的那个函数可以光荣下岗了.直接删除.然后把<em>philnaFeedRelatedPosts</em>函数中的<code class="language-plaintext highlighter-rouge">{$content .= philnaRelatedPosts('limit=8&amp;xcerpt_length=0');}</code>再<em>加个判断</em>,让他只在feed中显示(你应该不想在文章页也同时显示相关文章,因为文章下面已经有主题作者做好的相关文章啦.)</p>

<table>
  <tbody>
    <tr>
      <td><em>Update:</em>:jiong: 我吃饱了撑的,直接在if(is_feed())前面添加要增加if(is_feed()</td>
      <td> </td>
      <td>is_single())函数不就好了吗? 想弄的童鞋别犯我这样的错误了. 其实出这样的笑话都是 一边修改一边测试的原因,怕出现问题,所以每次只改一点,才闹了这样的笑话. :lol:</td>
    </tr>
  </tbody>
</table>

<p>最后贴一下 我的philnaFeedRelatedPosts函数,大家对照着看一下,就会更明白啦.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function philnaFeedRelatedPosts($content){
	if(is_feed()||is_single()){
		$content.= '&lt;div&gt;&lt;p class="copyright_info no_webshot"&gt; 　&amp;raquo; &lt;b&gt;原创文章如转载请注明来源：&lt;a title="I Say Me | 我说我自己 | 我说世界" href="http://ISayMe.com"&gt;自说Me话 &amp;#8482;&lt;/a&gt; &amp;raquo; &lt;a rel="bookmark" title="'.get_the_title().'" href="'.get_permalink().'"&gt;《'.get_the_title().'》&lt;/a&gt;&lt;/b&gt;
		　&amp;raquo; &lt;b&gt;本文链接地址：&lt;a rel="bookmark" title="'.get_the_title().'" href="'.get_permalink().'"&gt;'.get_permalink().'&lt;/a&gt;&lt;/b&gt;
		　&amp;raquo; &lt;b&gt;欢迎订阅本站：您可以选择通过&lt;a href="http://feeds2.feedburner.com/ISayMe.com" target="_blank"&gt;RSS阅读器订阅&lt;/a&gt;或者通过&lt;a href="http://feedburner.google.com/fb/a/mailverify?uri=isayme" target="_blank"&gt;邮件E-mail订阅&lt;/a&gt;&lt;/b&gt;
		&lt;strong class="icon"&gt;声明:&lt;/strong&gt;&lt;b&gt;如無特別申明,文章均為博主原創并遵循&lt;a title="署名-非商业性使用-相同方式共享3.0共享协议" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh" target="_blank" rel="external nofollow"&gt;署名-非商业性使用-相同方式共享3.0&lt;/a&gt;. 转载请注明转自&lt;a title="I Say Me | 我说我自己 | 我说世界" href="http://ISayMe.com" rel="bookmark inlinks"&gt; 自说Me话 &amp;#8482;&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;/div&gt;';}
		if(is_feed())
			{$content .= philnaRelatedPosts('limit=8&amp;excerpt_length=0');}
	return $content;
}
add_filter('the_content', 'philnaFeedRelatedPosts', 0);
</code></pre></div></div>

<p>在这里感谢Japhia童鞋 童鞋了.要不是他问我,我也想不起来去鼓捣一下这个feed中的版权信息的位置. :evil:</p>

</article>
<p class="lotus-anno">声明: 本文采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="自由转载-非商用-非衍生-保持署名">BY-NC-SA</a> 授权。转载请注明转自: <a href="http://isay.me/2011/04/42-final-version-feed-output-copyright-information.html" title="" rel="nofollow">PhilNa2主题feed输出版权最终版 - 自说Me话</a></p>
<section class="lotus-nextpage fn-clear">
  
  <div class="lotus-nextpage-left"><a class="prev" href="/2011/04/41-set-mod-rewrite-for-wp-ubuntu.html" rel="prev">&laquo;&nbsp;本地wordpress设置固定链接无效的解决办法</a></div>
  
  
  <div class="lotus-nextpage-right"><a class="next" href="/2011/04/43-modify-philna2-page-templates.html" rel="next">PhilNa2主题页面模板修改&nbsp;&raquo;</a></div>
  
</section>


  <div id="comments">
  
      
        <div id="disqus_thread"></div>
<script>
  function disqus_config() {
      this.page.url = "http://isay.me/2011/04/42-final-version-feed-output-copyright-information.html";
      this.page.identifier = "42";
      this.page.title = "PhilNa2主题feed输出版权最终版";
  };

  (function() {
      var d = document, s = d.createElement('script');
      s.src = '//isaymesite.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      
  
  </div>




  <footer class="lotus-footer">
  <p>Copyright © 2011–2023 自说Me话 All rights reserved. Design by <a href="http://www.zhanxin.info" target="_blank">zhanxin</a>.</p>
</footer>
  
</body>
</html>
