<!DOCTYPE html>
<html id="J-html" class="">
<head>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>对主题适当精简 | 自说Me话</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="对主题适当精简" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="最近对自己用的主题有点不满意了,于是处理一下.将一些用不着的功能去掉,也算是对主题载入速度加快一点吧." />
<meta property="og:description" content="最近对自己用的主题有点不满意了,于是处理一下.将一些用不着的功能去掉,也算是对主题载入速度加快一点吧." />
<link rel="canonical" href="http://isay.me/2011/09/make-the-theme-thiner.html" />
<meta property="og:url" content="http://isay.me/2011/09/make-the-theme-thiner.html" />
<meta property="og:site_name" content="自说Me话" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-09-02T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="对主题适当精简" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2011-09-02T00:00:00+08:00","datePublished":"2011-09-02T00:00:00+08:00","description":"最近对自己用的主题有点不满意了,于是处理一下.将一些用不着的功能去掉,也算是对主题载入速度加快一点吧.","headline":"对主题适当精简","mainEntityOfPage":{"@type":"WebPage","@id":"http://isay.me/2011/09/make-the-theme-thiner.html"},"url":"http://isay.me/2011/09/make-the-theme-thiner.html"}</script>
<!-- End Jekyll SEO tag -->

  <link type="application/atom+xml" rel="alternate" href="http://isay.me/feed.xml" title="自说Me话" />
  <link rel="stylesheet" type="text/css" media="all" href="/assets/css/style.css" />
  
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
  
  <nav class="lotus-nav">
  <ul>
    
    
    
    
    
    <li class="home ">
      
      <a href="/" rel="bookmark" title="首页">
        <i class="fa fa-home"></i>
      </a>
      
    </li>
    
    
    
    
    
    <li class=" ">
      
      <a href="/archives.html" rel="bookmark" title="文章归档">
        <i class="fa fa-reorder"></i>
      </a>
      
    </li>
    
    
    
    
    
    <li class=" ">
      
      <a href="/tags.html" rel="bookmark" title="文章标签">
        <i class="fa fa-tags"></i>
      </a>
      
    </li>
    

    
    
    
    
    
    <li class=" ">
      
      <a href="/contact.html" rel="bookmark" title="关于我">
        <i class="fa fa-user"></i>
      </a>
      
    </li>
    
  </ul>
</nav>

  <p class="lotus-breadcrub">
  <a href="/" rel="nofollow" rel="nofollow" title="首页">首页</a>
  <span> &gt; </span>
  <a href="/archives.html" rel="nofollow" >文章归档</a>
  <span> &gt; </span>
  对主题适当精简
</p>
<h1 class="lotus-pagetit">对主题适当精简</h1>
<p class="lotus-meta">Publish: <time class="date" pubdate="September  2, 2011">September  2, 2011</time></p>
<article  itemscope itemtype="http://schema.org/Article" class="lotus-post lotus-post-columns-1">
<p>最近对自己用的主题有点不满意了,于是处理一下.将一些用不着的功能去掉,也算是对主题载入速度加快一点吧.</p>

<p><strong>第一个是关闭侧栏的功能</strong></p>

<p>我发现有了这个功能,也没有多少次使用.还是去掉了吧.相比来说,这个功能的代码量也不少,所以去掉的话,应该对速度有不少帮助.</p>

<p><code class="language-plaintext highlighter-rouge">SayMeMod.js</code>中的以下内容去掉</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(function() {
	function SetCookie(c_name, value, expiredays) {
		var exdate = new Date();
		exdate.setTime(exdate.getTime() + expiredays * 24 * 3600 * 1000);
		document.cookie = c_name + "=" + escape(value) + ((expiredays == null) ? "": ";expires=" + exdate.toGMTString()) + ";path=/"
	}
	window['RootCookies'] = {};
	window['RootCookies']['SetCookie'] = SetCookie
})();//SetCookie函数
$('#close-sidebar').click(function() {//关闭侧栏
	RootCookies.SetCookie('show_sidebar', 'no', 30);
	$('#close-sidebar').hide();
	$('#show-sidebar').show();
	$('#sidebar').fadeOut(500);
	window.setTimeout(function() {
		$('#content,#content2,#content3,#footer').animate({
			width: "920px"
		},
		1000)
	},
	500)
});
$('#show-sidebar').click(function() {//显示侧栏
	RootCookies.SetCookie('show_sidebar', 'no', -1);
	$('#show-sidebar').hide();
	$('#close-sidebar').show();
	$('#content,#content2,#content3,#footer').animate({
		width: "662px"
	},
	800,
	function() {
		$('#sidebar').fadeIn(500)
	})
});
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">template.php hack archive.php links.php message.php page.php</code>文件中的以下内容去掉</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div id="top_right"&gt;
        &lt;ul id="menu-top_right"&gt;
		&lt;?php if(!$_COOKIE['show_sidebar']=='no'):?&gt;
			&lt;li id="close-sidebar" title="显示/关闭侧边栏"&gt;&lt;a&gt;关闭侧边栏&lt;/a&gt;&lt;/li&gt;
			&lt;li id="show-sidebar" style="display:none;"title="显示/关闭侧边栏"&gt;&lt;a&gt;显示侧边栏&lt;/a&gt;&lt;/li&gt;
		&lt;?php else: ?&gt;
			&lt;li id="close-sidebar" style="display:none;" title="显示/关闭侧边栏"&gt;&lt;a&gt;关闭侧边栏&lt;/a&gt;&lt;/li&gt;
			&lt;li id="show-sidebar" title="显示/关闭侧边栏"&gt;&lt;a&gt;显示侧边栏&lt;/a&gt;&lt;/li&gt;
		&lt;?php endif;?&gt;
        	&lt;?php if($_COOKIE['show_sidebar']=='no'): ?&gt;
&lt;style type="text/css"&gt;
#content,#content2{width:920px;}
#footer {width:920px;}
#sidebar {display:none;}
&lt;/style&gt;
		&lt;?php endif; ?&gt;
	&lt;/ul&gt;
&lt;/div&gt;
</code></pre></div></div>

<p>css中以下内容去掉</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/*close sidebar*/
#top_right { display: block; padding: 0;height: 25x; float:right;}
#top_right ul {float:right; margin: 0; padding: 0; position: relative;}
#top_right ul *:hover { background-color: #666; color: #FFF; cursor:pointer;}
#top_right ul a {display: block; color: #999; font-size: 12px; padding: 3px 15px 3px; margin: 0;}
#top_right ul li { display: block; list-style: none; float: left; position: relative; margin-bottom:0; }
</code></pre></div></div>

<p><strong>第二个是社会化分享函数</strong>,我反正从来不用,也没见过别人用.</p>

<p><code class="language-plaintext highlighter-rouge">SayMeMod.js</code>中的以下内容去掉</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function getParamsOfShareWindow(width, height) {
	return ['toolbar=0,status=0,resizable=1,width=' + width + ',height=' + height + ',left=', (screen.width - width) / 2, ',top=', (screen.height - height) / 2].join('')
}
function bindShareList() {
	var link = encodeURIComponent(document.location);
	var title = encodeURIComponent(document.title.substring(0, 76));
	var source = encodeURIComponent(lang.blogName);
	var windowName = 'share';
	var site = blogURL;
	jQuery('.twitter').click(function() {
		var url = 'http://twitter.com/home?url=' + link + '&amp;text=' + title;
		var params = getParamsOfShareWindow(500, 375);
		window.open(url, windowName, params)
	});
	jQuery('.renren').click(function() {
		var url = 'http://share.renren.com/share/buttonshare?link=' + link + '&amp;title=' + title;
		var params = getParamsOfShareWindow(626, 436);
		window.open(url, windowName, params)
	});
	jQuery('.sina').click(function() {
		var url = 'http://v.t.sina.com.cn/share/share.php?url=' + link + '&amp;title=' + title;
		var params = getParamsOfShareWindow(607, 523);
		window.open(url, windowName, params)
	});
	jQuery('.t_qq').click(function() {
		var url = 'http://v.t.qq.com/share/share.php?title=' + title + '&amp;source=' + source + '&amp;url=' + link;
		var params = getParamsOfShareWindow(642, 468);
		window.open(url, windowName, params)
	});
	jQuery('.qzone').click(function() {
		var url = 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title=' + title + '&amp;url=' + link + '&amp;site=' + site;
		var params = getParamsOfShareWindow(634, 668);
		window.open(url, windowName, params)
	})
}
bindShareList();
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">loop.php</code>中的以下内容去掉</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if(is_single()):?&gt;
	&lt;div class="share clearfix right"&gt;&lt;span&gt;分享到&lt;/span&gt;
 		&lt;span&gt;&lt;a class="t_qq" title="分享到腾讯微博"&gt;&lt;/a&gt;&lt;/span&gt;
 		&lt;span&gt;&lt;a class="sina" title="分享到新浪微博"&gt;&lt;/a&gt;&lt;/span&gt;
 		&lt;span&gt;&lt;a class="twitter" title="分享到Twitter"&gt;&lt;/a&gt;&lt;/span&gt;
 		&lt;span&gt;&lt;a class="renren" title="分享到淫淫网"&gt;&lt;/a&gt;&lt;/span&gt;
 		&lt;span&gt;&lt;a class="qzone" title="分享到扣扣空间"&gt;&lt;/a&gt;&lt;/span&gt;
	&lt;/div&gt;
&lt;?php endif;?&gt;
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">style.css</code>中的以下内容去掉</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/* 这是分享部分的样式代码 */
.share span{float:left;}
.share a{cursor:pointer;background:url("images/icon2.gif") no-repeat 0 0;display:block;padding:0 0 0 18px;height:16px;line-height:16px;color:#0066CC;overflow:hidden;margin:2px 0 0;text-decoration:none;float:left;}
.share a:hover{color:#E05C23;}
.share .twitter{background-position:0 -16px;}
.share .renren{background-position:0 -32px;}
.share .qzone{background-position:0 -48px;}
.share .t_qq{background-position:0 -64px;}
</code></pre></div></div>

<p>另外又去掉了两个原来已经废掉不用的函数代码,.以及在philna2.js中的函数调用.
<code class="language-plaintext highlighter-rouge">syntaxslide()</code>和<code class="language-plaintext highlighter-rouge">welcome_msg()</code></p>

<p>现在应该代码量就少了一点了,或许有空继续精简一下.现在不明白,原来我干嘛加这么多的东西呢?现在去掉我都嫌麻烦.</p>

</article>
<p class="lotus-anno">声明: 本文采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="自由转载-非商用-非衍生-保持署名">BY-NC-SA</a> 授权。转载请注明转自: <a href="http://isay.me/2011/09/make-the-theme-thiner.html" title="" rel="nofollow">对主题适当精简 - 自说Me话</a></p>
<section class="lotus-nextpage fn-clear">
  
  <div class="lotus-nextpage-left"><a class="prev" href="/2011/08/worst-network-school.html" rel="prev">&laquo;&nbsp;艹,牛逼的校园网认证</a></div>
  
  
  <div class="lotus-nextpage-right"><a class="next" href="/2011/09/made-a-theme-today.html" rel="next">今天移植了一个主题&nbsp;&raquo;</a></div>
  
</section>


  <div id="comments">
  
      
        <div id="disqus_thread"></div>
<script>
  function disqus_config() {
      this.page.url = "http://isay.me/2011/09/make-the-theme-thiner.html";
      this.page.identifier = "214";
      this.page.title = "对主题适当精简";
  };

  (function() {
      var d = document, s = d.createElement('script');
      s.src = '//isaymesite.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      
  
  </div>




  <footer class="lotus-footer">
  <p>Copyright © 2011–2023 自说Me话 All rights reserved. Design by <a href="http://www.zhanxin.info" target="_blank">zhanxin</a>.</p>
</footer>
  
</body>
</html>
