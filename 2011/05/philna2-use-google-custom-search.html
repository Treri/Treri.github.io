<!DOCTYPE html>
<html id="J-html" class="">
<head>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PhilNa2使用google自定义搜索 | 自说Me话</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="PhilNa2使用google自定义搜索" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="为什么使用google自定义搜索呢?" />
<meta property="og:description" content="为什么使用google自定义搜索呢?" />
<link rel="canonical" href="http://isay.me/2011/05/philna2-use-google-custom-search.html" />
<meta property="og:url" content="http://isay.me/2011/05/philna2-use-google-custom-search.html" />
<meta property="og:site_name" content="自说Me话" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-05-28T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PhilNa2使用google自定义搜索" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2011-05-28T00:00:00+08:00","datePublished":"2011-05-28T00:00:00+08:00","description":"为什么使用google自定义搜索呢?","headline":"PhilNa2使用google自定义搜索","mainEntityOfPage":{"@type":"WebPage","@id":"http://isay.me/2011/05/philna2-use-google-custom-search.html"},"url":"http://isay.me/2011/05/philna2-use-google-custom-search.html"}</script>
<!-- End Jekyll SEO tag -->

  <link type="application/atom+xml" rel="alternate" href="http://isay.me/feed.xml" title="自说Me话" />
  <link rel="stylesheet" type="text/css" media="all" href="/assets/css/style.css" />
  
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
  
  <nav class="lotus-nav">
  <ul>
    
    
    
    
    
    <li class="home ">
      
      <a href="/" rel="bookmark" title="首页">
        <i class="fa fa-home"></i>
      </a>
      
    </li>
    
    
    
    
    
    <li class=" ">
      
      <a href="/archives.html" rel="bookmark" title="文章归档">
        <i class="fa fa-reorder"></i>
      </a>
      
    </li>
    
    
    
    
    
    <li class=" ">
      
      <a href="/tags.html" rel="bookmark" title="文章标签">
        <i class="fa fa-tags"></i>
      </a>
      
    </li>
    

    
    
    
    
    
    <li class=" ">
      
      <a href="/contact.html" rel="bookmark" title="关于我">
        <i class="fa fa-user"></i>
      </a>
      
    </li>
    
  </ul>
</nav>

  <p class="lotus-breadcrub">
  <a href="/" rel="nofollow" rel="nofollow" title="首页">首页</a>
  <span> &gt; </span>
  <a href="/archives.html" rel="nofollow" >文章归档</a>
  <span> &gt; </span>
  PhilNa2使用google自定义搜索
</p>
<h1 class="lotus-pagetit">PhilNa2使用google自定义搜索</h1>
<p class="lotus-meta">Publish: <time class="date" pubdate="May 28, 2011">May 28, 2011</time></p>
<article  itemscope itemtype="http://schema.org/Article" class="lotus-post lotus-post-columns-1">
<p>为什么使用google自定义搜索呢?</p>

<p>因为google是搜索的老大,另一个原因是wp博客站内搜索，每搜索一次都会发送数据库查询，消耗服务器资源.
因此,我把博客中自带的搜索功能换成了 google自定义搜索.</p>

<p>可能有人说,只要申请一个google自定义搜索的ID号,在PhilNa2的后台填上就行了.
其实不然,只在后台填上KEY,默认的搜索结果会在新页面显示,我的目的是让搜索结果嵌入到博客中去.</p>

<p>大家可以在本博客侧栏搜索框上搜索一个东西,看搜索结果的样式.</p>

<p>具体步骤 ,简单一下.</p>

<p>1,申请一个google自定义搜索,然后进入管理后台控制面板,选择外观,然后选择IFRAME,选择一个样式,然后保存获取代码.
然后在那个填写网址的地方,填写你希望出现在你博客上的网址.
比如我的网址是 http://isayme.com/cse
然后你就得到了两端代码了.</p>

<p>2,修改搜索框代码,具体位置在philna2/serchform.php,在第30行可以看到对于是否使用google自定义个搜索的判断.
对这个地方进行对照修改.已经有的代码,就不用再加了,没有的就加上
修改的后的代码如下(我对google给的代码进行了修改,使之能够符合现在的css样式)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div id="search" class="s_google"&gt;
    &lt;form action="http://isayme.com/cse" id="cse-search-box"&gt;    &lt;!--注意将网址改为你的网址--&gt;
      &lt;div id="searchbox"&gt;
        &lt;input id="searchinput" class="textfield" type="text" name="q" size="24" value="" tabindex="12" /&gt;
        &lt;input id="searchbtn" class="button" type="submit" name="sa" value="" title="Search" /&gt;
        &lt;input type="hidden" name="cx" value="&lt;?php echo $GLOBALS['philnaopt']['google_cse_cx']; ?&gt;" /&gt;
        &lt;input type="hidden" name="cof" value="FORID:11" /&gt;
        &lt;input type="hidden" name="ie" value="UTF-8" /&gt;
      &lt;/div&gt;
  &lt;/form&gt;
&lt;/div&gt;
</code></pre></div></div>

<p>3,创建页面模板
复制一个平常的页面模板,然后对页面模板的内容进行修改.这时要用到google给你的第二段代码.
将</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div id=content&gt;
..........
&lt;/div&gt; 之间的内容全部清空,然后将google给你的第二段代码粘贴到这里 然后在后台新建一个页面,网址设为你修改搜索框时的那个action中的网址,比如我的网址是 http://isayme.com/cse
</code></pre></div></div>

<p>做完后测试一下吧,在后台的设置中选择使用google自定义搜索,填上自己的专有号码,
然后在搜索框中搜索一个东西.搜索结果就会从你的模板里面打开了.</p>

<p>很简单对吧,呵呵.var googleSearchFrameWidth = 600; 是用来控制搜索结果的宽度的,要是调节这个宽度不变化的话,就在css中添加如下代码</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#cse-search-results iframe {width:662px;} 改成你自己的宽度就行了,感谢[园子博客](http://www.yzznl.cn/archives/272.html)提供的方法,解决了我的搜索结果宽度不可调节的问题
</code></pre></div></div>

</article>
<p class="lotus-anno">声明: 本文采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="自由转载-非商用-非衍生-保持署名">BY-NC-SA</a> 授权。转载请注明转自: <a href="http://isay.me/2011/05/philna2-use-google-custom-search.html" title="" rel="nofollow">PhilNa2使用google自定义搜索 - 自说Me话</a></p>
<section class="lotus-nextpage fn-clear">
  
  <div class="lotus-nextpage-left"><a class="prev" href="/2011/05/w1s-unlimited-pages.html" rel="prev">&laquo;&nbsp;W1免费版无限翻页</a></div>
  
  
  <div class="lotus-nextpage-right"><a class="next" href="/2011/05/w1s-new-ajax-page.html" rel="next">W1s 首页Ajax翻页新效果&nbsp;&raquo;</a></div>
  
</section>


  <div id="comments">
  
      
        <div id="disqus_thread"></div>
<script>
  function disqus_config() {
      this.page.url = "http://isay.me/2011/05/philna2-use-google-custom-search.html";
      this.page.identifier = "150";
      this.page.title = "PhilNa2使用google自定义搜索";
  };

  (function() {
      var d = document, s = d.createElement('script');
      s.src = '//isaymesite.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      
  
  </div>




  <footer class="lotus-footer">
  <p>Copyright © 2011–2023 自说Me话 All rights reserved. Design by <a href="http://www.zhanxin.info" target="_blank">zhanxin</a>.</p>
</footer>
  
</body>
</html>
